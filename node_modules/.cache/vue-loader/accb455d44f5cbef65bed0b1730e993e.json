{"remainingRequest":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\iview-loader\\index.js??ref--0-2!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\pages\\account\\login\\indexSp.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\pages\\account\\login\\indexSp.vue","mtime":1602574990000},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628602912197},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\babel-loader\\lib\\index.js","mtime":1628602899323},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628602912197},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\vue-loader\\lib\\index.js","mtime":1628602913036},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\iview-loader\\index.js","mtime":1628602915515}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport iCopyright from '@/components/copyright';\nimport { mapActions } from 'vuex';\nimport mixins from '../mixins';\nimport util from '@/libs/util'\nexport default {\n    mixins: [ mixins ],\n    components: { iCopyright },\n    data () {\n        return {\n            autoLogin: true\n        }\n    },\n    methods: {\n        ...mapActions('admin/account', [\n            'login'\n        ]),\n        /**\n         * @description 登录\n         * 表单校验已有 iView Pro 自动完成，如有需要修改，请阅读 iView Pro 文档\n         */\n        handleSubmit (valid, values) {\n            let self = this;\n            if (valid) {\n                const { username, password } = values;\n                util.cookies.set('token', 'A68NUPaXVBJYRStwvd9frcUn8rlf30h6');\n                // console.log(this.$store.state.admin.user)\n                this.$store.dispatch('admin/user/set', {\n                    name: 'Aresn',\n                    avatar: 'https://dev-file.iviewui.com/userinfoPDvn9gKWYihR24SpgC319vXY8qniCqj4/avatar',\n                    access: ['admin']\n                })\n                self.$router.replace(self.$route.query.redirect || '/');\n                return\n                util.ajax({\n                    method: 'post',\n                    url: 'common/service.execute.json',\n                    data: {\n                        _call: 'sys.memberService.login',\n                        params: {\n                            'loginType': 1,\n                            'loginName': username,\n                            'loginPwd': password\n                        }\n                    }\n                }).then(function (response) {\n                    console.log(response)\n                    util.cookies.set('uuid', response.output.memberId);\n                    util.cookies.set('token', response.output.loginToken);\n                    util.cookies.set('loginToken', response.output.loginToken);\n                    util.cookies.set('companyCode', '1');\n                    // Cookies.set('loginToken', response.data.output.loginToken);\n                    response.output.moblieNumber = username;\n                    /* this.$store.dispatch('admin/user/set', {\n                        name: 'Aresn',\n                        avatar: 'https://dev-file.iviewui.com/userinfoPDvn9gKWYihR24SpgC319vXY8qniCqj4/avatar',\n                        access: ['admin']\n                    }) */\n                    self.$store.dispatch('admin/user/set', response.output);\n                    self.$router.replace(self.$route.query.redirect || '/');\n                })\n            }\n        },\n        // 获取验证码\n        handleGetCaptcha (value, values) {\n            console.log(value, values)\n            console.log('11')\n            // if () {}\n            util.ajax({\n                data: {\n                    _call: 'sys.memberService.sendValidCode',\n                    params: {\n                        mobileNbr: values.username\n                    }\n                }\n            }).then(res => {\n                if (res.output.flag) {\n                    this.$Message.info('发送验证码成功');\n                } else {\n                    this.$Message.error(res.output.msg)\n                }\n            })\n        }\n    }\n};\n",null]}