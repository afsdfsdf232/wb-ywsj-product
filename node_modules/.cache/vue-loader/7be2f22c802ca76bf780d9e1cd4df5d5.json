{"remainingRequest":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\iview-loader\\index.js??ref--0-2!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\pages\\account\\register\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\pages\\account\\register\\index.vue","mtime":1589174870000},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628602912197},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\babel-loader\\lib\\index.js","mtime":1628602899323},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628602912197},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\vue-loader\\lib\\index.js","mtime":1628602913036},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\iview-loader\\index.js","mtime":1628602915515}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport iCopyright from '@/components/copyright';\nimport { mapActions } from 'vuex';\nimport mixins from '../mixins';\n\nexport default {\n    mixins: [ mixins ],\n    components: { iCopyright },\n    data () {\n        // 二次校验密码\n        // 因为 iView Pro 的表单控件省去了对数据的绑定，因此需要通过 ref 从 Login 组件中获取数据\n        // 下面的 formValidate.password 中的 password，指的是给 <Password> 组件设置的 name=\"password\"\n        const validatePassCheck = (rule, value, callback) => {\n            if (value !== this.$refs.form.formValidate.password) {\n                callback(new Error('两次输入的密码不匹配！'));\n            } else {\n                callback();\n            }\n        };\n\n        return {\n            passwordRule: [\n                {\n                    required: true, message: '密码不能为空！', trigger: 'change'\n                },\n                {\n                    min: 6, message: '密码不能少于6位！', trigger: 'change'\n                }\n            ],\n            passwordConfirmRule: [\n                {\n                    required: true, message: '确认密码不能为空！', trigger: 'change'\n                },\n                { validator: validatePassCheck, trigger: 'change' }\n            ],\n            // 密码长度，在密码强度提示时作为判断依据\n            passwordLen: 0\n        }\n    },\n    computed: {\n        // 密码强度提示文案等\n        passwordTip () {\n            let strong = '强';\n            let className = 'strong';\n            let percent = this.passwordLen > 10 ? 10 : this.passwordLen;\n            let color = '#19be6b';\n\n            if (this.passwordLen < 6) {\n                strong = '太短';\n                className = 'low';\n                color = '#ed4014';\n            } else if (this.passwordLen < 10) {\n                strong = '中';\n                className = 'medium';\n                color = '#ff9900';\n            }\n\n            return {\n                strong,\n                class: `page-account-register-tip-${className}`,\n                percent: percent * 10,\n                color\n            }\n        }\n    },\n    methods: {\n        ...mapActions('admin/account', [\n            'register',\n            'login'\n        ]),\n        handleChangePassword (val) {\n            this.passwordLen = val.length;\n        },\n        /**\n         * @description 注册\n         * 表单校验已有 iView Pro 自动完成，如有需要修改，请阅读 iView Pro 文档\n         */\n        handleSubmit (valid, values) {\n            if (valid) {\n                if (valid) {\n                    const { mail, password, mobile, captcha } = values;\n                    this.register({\n                        mail,\n                        password,\n                        mobile,\n                        captcha\n                    })\n                        .then(() => {\n                            this.$router.replace({ name: 'register-result' });\n                    });\n                }\n            }\n        },\n        /**\n         * @description 获取验证码\n         * */\n        handleGetCaptcha () {\n\n        }\n    }\n};\n",null]}