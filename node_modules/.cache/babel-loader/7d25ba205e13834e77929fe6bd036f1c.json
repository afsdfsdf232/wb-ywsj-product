{"remainingRequest":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\store\\modules\\admin\\modules\\i18n.js","dependencies":[{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\src\\store\\modules\\admin\\modules\\i18n.js","mtime":1589174872000},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628602912197},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\babel-loader\\lib\\index.js","mtime":1628602899323},{"path":"D:\\project\\WB\\d2\\免费领前端任务包\\ywsj-product\\node_modules\\eslint-loader\\index.js","mtime":1607701091992}],"contextDependencies":[],"result":["/**\r\n * 多语言\r\n * */\nimport Languages from '@/i18n/locale';\nimport Setting from '@/setting';\nimport util from '@/libs/util';\nimport { pathInit } from '@/store/modules/admin/modules/db';\nvar savedLocaleKey = 'i18n-locale';\nexport default {\n  namespaced: true,\n  state: {\n    locale: ''\n  },\n  actions: {\n    /**\r\n     * @description 获取当前语言\r\n     * */\n    getLocale: function getLocale(_ref) {\n      var state = _ref.state;\n      var locale;\n      var db = util.db.get(pathInit({\n        dbName: 'database',\n        path: '',\n        user: true,\n        defaultValue: {}\n      }));\n      var savedLocale = db.get(savedLocaleKey).value(); // 先判断本地存储是否已有语言选择\n\n      if (savedLocale) {\n        locale = savedLocale;\n      } else {\n        // 判断是否开启自动识别语言\n        if (Setting.i18n.auto) {\n          // 如果自动识别的语言，本地没有该语言包，则设置为默认语言\n          var navLang = navigator.language;\n\n          if (Languages[navLang]) {\n            locale = navLang;\n          } else {\n            locale = Setting.i18n.default;\n          }\n        } else {\n          locale = Setting.i18n.default;\n        } // 将初次的语言保存在本地\n\n\n        db.set(savedLocaleKey, locale).write();\n      }\n\n      state.locale = locale;\n    },\n\n    /**\r\n     * @description 设置当前语言\r\n     * */\n    setLocale: function setLocale(_ref2, _ref3) {\n      var state = _ref2.state;\n      var _ref3$locale = _ref3.locale,\n          locale = _ref3$locale === void 0 ? Setting.i18n.default : _ref3$locale,\n          vm = _ref3.vm;\n      var db = util.db.get(pathInit({\n        dbName: 'database',\n        path: '',\n        user: true,\n        defaultValue: {}\n      })); // 将语言保存在本地\n\n      db.set(savedLocaleKey, locale).write(); // 设置当前语言\n\n      state.locale = locale; // 设置 vue-i18n 的语言\n\n      vm.$i18n.locale = locale; // 更新网页标题\n\n      util.title({\n        title: vm.$route.meta.title\n      });\n    }\n  }\n};",null]}